<!DOCTYPE html>
<html>
{% set useOverriddenRelevantAvg = false if (relevantAvg >= 400) else true %}
{% set usedRelevantAvg = relevantAvg if (useOverriddenRelevantAvg == false) else 400 %}
{% set relevantMcopMultiplier=0 if (refAvg >= usedRelevantAvg) else (usedRelevantAvg - refAvg)/refAvg %}
{% set relevantMcopRate="%.3f"|format (relevantMcopMultiplier * 100)|float %}

{% set useOverriddenPrevAvg = false if (prevAvg >= 400) else true %}
{% set usedPrevAvg = prevAvg if (useOverriddenPrevAvg == false) else 400 %}
{% set prevMcopMultiplier=0 if (refAvg >= usedPrevAvg) else (usedPrevAvg - refAvg)/refAvg %}
{% set prevMcopRate="%.3f"|format (prevMcopMultiplier * 100)|float %}

{% set useOverriddenCurrAvg = false if (currAvg >= 400) else true %}
{% set usedCurrAvg = currAvg if (useOverriddenCurrAvg == false) else 400 %}
{% set currMcopMultiplier=0 if (refAvg >= usedCurrAvg) else (usedCurrAvg - refAvg)/refAvg %}
{% set currMcopRate="%.3f"|format (currMcopMultiplier * 100)|float %}

<head>
    <title>M.C.O.P. Calculator</title>
	<link rel="shortcut icon" href="#" />
	<style>
		body, p {
			text-align: center;
			padding: 0px;
			margin: 5px;
			background-color: antiquewhite;
		}
		table, td {
			margin-left: auto;
			margin-right: auto;
			border: 1px solid black;
			border-collapse: collapse;
			text-align: left;
			padding: 5px;
		}
		th {
			background-color: burlywood;
			text-align: center;
			padding-top: 5px;
			padding-bottom: 5px;
			padding-left: 10px;
			padding-right: 10px;
		}
		.BIG {
		 	font-weight: bold;
		 	font-size: 100px;
		}
		.BIG.RED {
		  	color: crimson;
		}
		.MEDIUM {
		  	font-weight: bold;
		  	font-size: 35px;
		}
		table, .SMALL {
		  	font-weight: lighter;
		  	font-size: 20px;
		}
		.SMALL.RED {
		  	font-weight: bold;
			color: crimson;
		}
	</style>
</head>

<body>
	<p class="SMALL RED">NOTE: The real value is calculated by the Finance Department, their calculation is the relevant one, not this!</p>
	<table>
		<thead>
			<tr>
				<th>MONTH</th>
				<th>HUF/EUR</th>
				<th>M.C.O.P.</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>
					<b>{{refYear}}. {{refMonth}} (reference month)</b>
				</td>
				<td class="SMALL RED">
					{{"%.2f"|format (refAvg)}}
				</td>
				<td></td>
				<td rowspan="4" style="vertical-align:bottom;">
					<i>can be partial!</i>
				</td>
			</tr>
			<tr>
				<td>
					<b>{{relevantYear}}. {{relevantMonth}} (relevant month)</b>
				</td>
				<td class="SMALL RED">
					{{"%.2f"|format (relevantAvg)}}
					{% if (useOverriddenRelevantAvg) %}
						(Overridden to 400!)
					{% endif %}
				</td>
				<td class="SMALL RED">{{relevantMcopRate}}</td>
			</tr>
			<tr>
				<td>
					{{prevYear}}. {{prevMonth}} (previous month)
				</td>
				<td>
					{{"%.2f"|format (prevAvg)}}
					{% if (useOverriddenPrevAvg) %}
						(Overridden to 400!)
					{% endif %}
				</td>
				<td>{{prevMcopRate}}</td>
			</tr>
			<tr>
				<td>
					<i>{{currYear}}. {{currMonth}} (actual month)</i>
				</td>
				<td>
					<i>{{"%.2f"|format (currAvg)}}</i>
					{% if (useOverriddenCurrAvg) %}
						(Overridden to 400!)
					{% endif %}
				</td>
				<td><i>{{currMcopRate}}</i></td>
			</tr>
		</tbody>
	</table>
	<p class="MEDIUM">Monthly Currency Offset Payment Rate for {{currYear}}. {{currMonth}} is:</p> <p class="BIG RED">{{relevantMcopRate}}%</p>
	<table>
		{%set amounts = [100, 500, 800, 1000, 1200, 1500, 2000]%}
		{% for amount in amounts %}
		<tr>
			<td>For {{"{:,}".format(amount * 1000)}} HUF, the Monthly Currency Offset Payment is:</td>
			<td>{{ "{:,}".format((amount * 10 * relevantMcopRate)|round|int)}} HUF</td>
		</tr>
		{% endfor %}
	</table>
	<p>Â©<a href="mailto:daneedtools@gmail.com" target="_blank">Daniel Serly</a> | <a href="https://github.com/daneed/MontlyCurrencyOffsetPayment" target="_blank">GitHub</a></p>
	<p class="SMALL RED">NOTE: The real value is calculated by the Finance Department, their calculation is the relevant one, not this!</p>
</body>

</html>
